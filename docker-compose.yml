version: '3.8'

services:
  siglip-api:
    build: .
    container_name: siglip-api
    ports:
      - "8001:8001"
    environment:
      - LOG_LEVEL=INFO
      # Add any additional environment variables here
      # - CUDA_VISIBLE_DEVICES=0  # Uncomment for GPU support
    volumes:
      # Mount local directory for image files (optional)
      # - ./images:/home/user/app/images:ro
      
      # Mount model cache to avoid re-downloading

    restart: unless-stopped
    # healthcheck:
    #   test: ["CMD", "curl", "-f", "http://localhost:8001/health"]
    #   interval: 30s
    #   timeout: 10s
    #   retries: 3
    #   start_period: 40s
    # Uncomment for GPU support
    # deploy:
    #   resources:
    #     reservations:
    #       devices:
    #         - driver: nvidia
    #           count: 1
    #           capabilities: [gpu]

# volumes:
#   siglip-model-cache:
#     driver: local
